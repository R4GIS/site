---
title: "Gráfico de radar (ou de teia) em ggplot2"
date: "2017-07-06T10:12:00+03:00"
tags: ["radar", "teia", "ggplot2"]
categories: ["tutoriais", "r"]
banner: "img/banners/guess_delim.png"
author: ["Athos"]
draft: true
summary: ""
---
  
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, 
                      message = FALSE, 
                      warning = FALSE, 
                      comment = FALSE,
                      eval=TRUE, cache = TRUE)
```

```{r, echo = FALSE}
library(tidyr)
library(ggplot2)
library(tibble)
library(dplyr)
```

```{r, echo = FALSE}
coord_radar <- function (theta = "x", start = 0, direction = 1) {
  theta <- match.arg(theta, c("x", "y"))
  r <- if_else(theta == "x", "y", "x")
  ggproto("CordRadar", CoordPolar, theta = theta, r = r, start = start, 
          direction = sign(direction),
          is_linear = function(coord) TRUE)
}

diamonds_rearranjado <- diamonds %>%
  mutate(price_cat = cut(price, breaks = c(0, 500, 3000, 6000, 10000, 16000, Inf), labels = c("a. Até $500", "b. de $500 a $3000", "c. de $3000 a $6000", "d. de $6000 a $10000", "e. de $10000 a $16000", "f. $16000 ou mais"))) %>%
  select(price_cat, carat, depth:z) %>%
  group_by(price_cat) %>%
  summarise_all(mean) %>%
  gather(caracteristica, valor, -price_cat) %>%
  group_by(caracteristica) %>%
  mutate(valor = valor %>% scales::rescale()) %>%
  arrange(caracteristica)

grafico_final <- diamonds_rearranjado %>%
  ggplot() +
  geom_polygon(aes(x = caracteristica, y = valor, group = price_cat, colour = price_cat), fill = "transparent") +
  geom_point(aes(x = caracteristica, y = valor, colour = price_cat), size = 4) +
  theme_minimal() +
  labs(x = "", y = "") +
  theme(axis.text.y = element_blank()) +
  coord_radar()
```


No fim do post nós vamos construir o seguinte gráfico:

```{r}
grafico_final
```

Conhecido como gráfico de radar ou gráfico de teia, muito conhecido pelos usuários de excel. No ggplot2 não é tão direto e precisa de alguns passos pra construí-lo. Dividi em 5 passos, vamos a eles.

## Passo 1 - rearranjando o banco de dados

## Passo 2 - montando as linhas

## Passo 3 - dobrando para a forma circular

## Passo 4 - ligando os pontos

## Passo 5 - retificando as curvas



```{r, echo = TRUE, eval = FALSE}
library(tidyr)
library(ggplot2)
library(tibble)
library(dplyr)
```

